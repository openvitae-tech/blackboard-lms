<div class="p-6 bg-white rounded box-shadow-medium mt-6" id="team-user-info-fragment">
  <div class="flex flex-row justify-between items-start w-full">
    <div class="flex flex-col gap-4 w-full">
      <div class="flex justify-between">
        <p class="heading heading-semibold text-primary w-52 md:w-full break-words"><%= user.name %></p>

        <div class="flex space-x-3 items-start flex-shrink-0">
          <%= render 'users/user_state', user: user %>
          <% menu_items = [
            (UiHelper::MenuItem.new(
              label: "Deactivate",
              url: deactivate_member_path(user),
              type: :link,
              options: { data: { turbo_frame: "modal" } }
            ) if policy(user).deactivate?),

            (UiHelper::MenuItem.new(
              label: "Activate",
              url: activate_member_path(user),
              type: :link,
              options: { data: { turbo_frame: "modal" } }
            ) if policy(user).activate?),

            (UiHelper::MenuItem.new(
              label: "Delete",
              url: member_path,
              type: :link,
              extra_classes: "text-danger",
              options: { data: { turbo_method: :delete, turbo_confirm: "Are you sure want to delete?" } }
            ) if policy(user).destroy?),

            (UiHelper::MenuItem.new(
              label: "Change team",
              url: change_team_member_path,
              type: :link,
              options: { data: { turbo_frame: "modal" } }
            ) if policy(user).change_team?)
          ].compact %>

          <%= menu_component(menu_items, icon_class: "member-more", label_hover: "hover:bg-line-colour") %>


        </div>
      </div>

      <div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-6">
        <div class="flex items-center">
          <span class="text-sm mr-1">Role:</span>
          <p class="text-sm"><%= user.role %></p>
        </div>
        <div class="flex items-center space-x-2">
          <span class="icon icon-at-sign bg-letter-color icon-small mr-1"></span>
          <p class="text-sm"><%= email(user) %></p>
        </div>
        <% if user.phone.present? %>
          <div class="flex items-center space-x-2">
            <span class="icon icon-smartphone bg-letter-color icon-small mr-1"></span>
            <p class="text-sm"><%= user.country_code %><%= user.phone %></p>
          </div>
        <% end %>
        <div class="flex items-center space-x-2">
          <span class="icon icon-team bg-letter-color icon-small mr-1"></span>
          <p class="text-sm"><%= user.team.name %></p>
        </div>
      </div>
    </div>
  </div>
</div>
