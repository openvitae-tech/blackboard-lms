<%= render "shared/components/desktop_layout" do %>
  <% if policy(:course).new? %>
    <div class="flex gap-4 justify-end">
      <%= link_to new_course_path, class: "nav-link" do %>
        <%= render 'shared/components/icon_button_primary', label: 'Add course', icon_name: 'icon-plus-white' %>
      <% end %>
    </div>
  <% end %>
  <div class="flex flex-row justify-between w-full mb-4">
    <h1 class="text-xl font-semibold">My Courses</h1>
    <div class="flex gap-4">
      <% if @type.present? %>
        <%= render "shared/components/dropdown_menu", menu: category_tags, selected_label: selected_tag(is_category: true) %>
        <%= render "shared/components/dropdown_menu", menu: level_tags, selected_label: selected_tag %>
      <% end %>
    </div>
  </div>
  <% if @available_courses.blank? && @enrolled_courses.blank? %>
    <p class="text-base font-medium mb-4">
      <span>No results found with your search query "<%= params[:term] %>"</span>
    </p>
  <% end %>
  <% if has_enrolled_courses? && @type != "all" %>
    <p class="text-base font-medium mb-4">
      <span class="">Enrolled courses</span>&nbsp<span class="text-letter-color-light">(<%= pluralize(@enrolled_courses_count, 'enrollment') %>)</span>
      <%= link_to 'View more', courses_path(request.query_parameters.merge(type: "enrolled")), class: 'text-xs text-primary hover:cursor-pointer underline' if @type.nil? %>
    </p>
    <div class="flex flex-wrap gap-4">
      <% @enrolled_courses.each do |course| %>
        <%= render 'courses/course_card_with_left_image', course: course, enrollment: course.enrollments.first %>
      <% end %>
    </div>
    <%= paginate(@enrolled_courses) if @type.present? %>
  <% end %>
  <% if has_available_courses? && @type != "enrolled" %>
    <p class="text-base font-medium my-4">
      <span class="">Available courses</span>&nbsp<span class="text-letter-color-light">(<%= pluralize(@available_courses_count, 'course') %> )</span>
      <%= link_to 'View more', courses_path(request.query_parameters.merge(type: "all")), class: 'text-xs text-primary hover:cursor-pointer underline' if @type.nil?  %>
    </p>
    <div class="flex flex-wrap gap-4">
      <% @available_courses.each do |course| %>
        <%= render 'courses/course_card_with_top_image', course: course %>
      <% end %>
    </div>
    <%= paginate(@available_courses) if @type.present? %>
  <% end %>
<% end %>
