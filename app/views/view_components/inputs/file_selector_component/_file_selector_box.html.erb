<div data-controller="file-selector" data-file-selector-target="wrapper" class="<%= file_selector.wrapper_style %>">
  <div
    class="file-selector-input-box"
    data-action="click->file-selector#chooseFile">
    <div class="flex flex-col gap-1 items-center" data-file-selector-target="chooseFile">

      <% if file_selector.form.present? && file_selector.name.present? %>
        <%= file_selector.form.file_field(
              file_selector.name,
              accept: file_selector.accepted_types,
              class: "hidden",
              disabled: file_selector.disabled,
              data: { file_selector_target: "fileInput" }
            ) %>
      <% else %>
        <%= file_field_tag(
              file_selector.name,
              accept: file_selector.accepted_types,
              class: "hidden",
              disabled: file_selector.disabled,
              data: { file_selector_target: "fileInput" }
            ) %>
      <% end %>

      <%= icon("document-arrow-up", css: file_selector.upload_icon_style) %>
      <% if file_selector.error.present? %>
        <p class="general-text-sm-normal file-selctor-error-text">
          <%= file_selector.error %>
        </p>
      <% end %>
      <p class="<%= file_selector.choose_file_style %>">Choose file</p>
    </div>

    <label
      class="hidden flex flex-col items-center justify-center"
      data-file-selector-target="selectedFileName">
      <span data-file-selector-target="fileName" class="general-text-md-normal text-center"></span>
      <span data-file-selector-target="fileSize" class="general-text-sm-normal text-center"></span>
    </label>
  </div>

  <% if file_selector.type == "image" %>
    <div class="<%= file_selector.preview_style %> hidden" data-file-selector-target="previewContainer">
      <img data-file-selector-target="preview" class="file-selector-preview-image" alt="Preview" />
      <button
        type="button"
        data-action="click->file-selector#resetInput"
        class="file-selector-preview-close">
        <%= icon("x-circle", css: "file-selector-close-icon") %>
      </button>
    </div>
    <% elsif file_selector.type == "video" %>
      <div class="<%= file_selector.preview_style %> hidden" data-file-selector-target="previewContainer">
        <video data-file-selector-target="preview"
          class="file-selector-preview-image" src=""></video>
        <button
          type="button"
          data-action="click->file-selector#resetInput"
          class="file-selector-preview-close">
          <%= icon("x-circle", css: "file-selector-close-icon") %>
        </button>
      </div>
  <% elsif file_selector.type == "document" %>
    <div class="<%= file_selector.preview_style %> hidden" data-file-selector-target="previewContainer">
      <div data-file-selector-target="iconPreview" class="file-selector-doc-preview">
        <%= icon("document-text", css: "file-selector-upload-icon fill-primary") %>
      </div>
      <button
        type="button"
        data-action="click->file-selector#resetInput"
        class="file-selector-preview-close">
        <%= icon("x-circle", css: "file-selector-close-icon") %>
      </button>
    </div>
  <% end %>
</div>
