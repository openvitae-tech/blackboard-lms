<li id="<%= dom_id(course, "unassigned") %>" class="w-full" data-controller="course-select-item-component" data-course-select-item-component-course-select-component-outlet='#course-select-component'>
  <div class="relative flex w-full flex-col rounded p-6 box-shadow-medium md:flex-row">
    <div class="absolute top-1 left-1 z-10 flex flex-wrap justify-start gap-2 heading">
      <% course.tags.each do |tag| %>
        <% if tag.tag_type == "level" %>
          <span class="px-2 py-1 text-xs font-medium text-white bg-theme-highlight">
            <%= tag.name %>
          </span>
        <% end %>
      <% end %>
    </div>

    <%= image_tag course_banner(course, :vertical), class: 'h-[118px] w-[152px] md:h-[208px] md:w-[140px] rounded-l object-cover' %>

    <div class="flex w-full flex-col gap-4 pt-2 md:ps-4">
      <div class="relative">
        <%= check_box_tag 'course_ids[]', # name
                          course.id, # value
                          false, # checked?
                          id: dom_id(course, "course_ids"),
                          class: 'absolute -top-32 md:top-0 right-0 w-6 h-6 border-2 rounded border-secondary checked:bg-secondary checked:border-secondary checked:focus:bg-secondary focus:ring-0',
                          data: { action: 'course-select-item-component#toggleDurationSelect' } %>

        <div class="flex flex-col gap-4">
          <p class="overflow-hidden text-ellipsis text-primary heading heading-semibold">
            <%= course.title %>
          </p>
          <div class="flex justify-start space-x-1 md:space-x-4">
            <div class="flex items-center">
              <span class="icon icon-lessons h-3.5 w-3.5 bg-primary"></span>
              <span class="ml-2 text-xs font-medium"><%= modules_count(course) %></span>
            </div>
            <div class="flex items-center">
              <span class="icon icon-clock h-3.5 w-3.5 bg-primary"></span>
              <span class="ml-2 text-xs font-medium"><%= course_duration(course) %></span>
            </div>
            <div class="flex items-center">
              <span class="icon icon-user h-3.5 w-3.5 bg-primary"></span>
              <span class="ml-2 text-xs font-medium"><%= enroll_count(course) %></span>
            </div>
          </div>
          <p class="overflow-hidden text-ellipsis text-sm font-medium tracking-tight max-h-[20px] heading">Course
            Description</p>
          <div class="rounded-lg p-4 text-justify text-sm tracking-tight bg-primary-light-50">
            <div class="flex h-full items-center overflow-hidden text-sm">
              <%= course_description(course) %>
            </div>
          </div>
          <div>
            <div class="flex h-full items-center overflow-hidden text-sm">
              <% course.tags.each do |tag| %>
                <% if tag.tag_type == "category" %>
              <span class="rounded px-2 py-1 text-xs font-medium bg-primary-light-50">
                <%= tag.name %>
              </span>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>

        <div class="invisible absolute -top-24 -right-4 flex flex-col items-end gap-2 opacity-0 md:top-0 md:right-12 md:flex-row md:items-center" data-course-select-item-component-target="durationContainer">
          <label for="duration" class="text-sm font-medium heading md:text-base">Assign Duration:</label>
          <div class="flex flex-row items-center">
            <%= date_field_tag :date, nil,
                               id: "datePicker",
                               class: "invisible p-0 w-[2px]",
                               data: {
                                 action: "change->course-select-item-component#datePicked",
                                 course_select_item_component_target: "datePicker"
                               } %>

            <%= select_tag 'duration[]', options_for_select(options_for_duration),
                           id: 'duration',
                           disabled: true,
                           class: 'border border-line-colour-light box-shadow-small rounded focus:ring-0 p-0 px-2 h-6 w-28 text-sm',
                           data: { course_select_item_component_target: 'dateSelector', duration: 'duration' } %>
            <div class="relative flex items-center pl-2">
              <span class="cursor-pointer icon-small icon icon-calendar bg-letter-color" data-action="click->course-select-item-component#openDatePicker"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</li>
